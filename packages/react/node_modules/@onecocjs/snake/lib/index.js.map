{"version":3,"file":"index.js","sources":["../node_modules/lodash.isplainobject/index.js","../src/index.ts"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n","import isPlainObject from \"lodash.isplainobject\";\n\nexport const SNAKE_SYMBOL = Symbol(\"@@SNAKE_SYMBOL\");\n\nfunction caclPath(parentPath, property) {\n  return parentPath ? `${parentPath}.${property}` : `${property}`;\n}\nfunction defineHiddenConstantProperty<T, S extends symbol | string, V>(\n  target: T,\n  name: S,\n  value: V\n) {\n  Object.defineProperty(target, name, {\n    value: value,\n    enumerable: false,\n    writable: false,\n    configurable: false,\n  });\n}\n\nconst SYMBOL_MATCH = [\n  SNAKE_SYMBOL,\n  Symbol.asyncIterator,\n  Symbol.hasInstance,\n  Symbol.isConcatSpreadable,\n  Symbol.iterator,\n  Symbol.match,\n  Symbol.replace,\n  Symbol.search,\n  Symbol.species,\n  Symbol.split,\n  Symbol.toPrimitive,\n  Symbol.toStringTag,\n  Symbol.unscopables,\n];\n\nexport function createProxy<T extends object>(\n  state: T,\n  deps: Map<string, any>,\n  parentPath?: string\n): T {\n  const proxy = new Proxy(state, {\n    get(target, property, receiver) {\n      const value = Reflect.get(target, property, receiver);\n\n      // 如果是 symbol 类型 则直接返回\n      if (typeof property === \"symbol\") {\n        return value;\n      }\n\n      const path = caclPath(parentPath, property);\n\n      if (isPlainObject(value) || Array.isArray(value)) {\n        defineHiddenConstantProperty(value, SNAKE_SYMBOL, 1);\n        return createProxy(value, deps, path);\n      }\n\n      const count = deps.get(path) + 1;\n      if (isNaN(count)) {\n        deps.set(path, 1);\n      } else {\n        deps.set(path, count);\n      }\n\n      return value;\n    },\n  });\n  return proxy;\n}\n"],"names":["func","transform","funcProto","Function","prototype","objectProto","Object","funcToString","toString","hasOwnProperty","objectCtorString","call","objectToString","getPrototype","getPrototypeOf","arg","value","isObjectLike","result","e","isHostObject","proto","Ctor","constructor","SNAKE_SYMBOL","Symbol","createProxy","state","deps","parentPath","Proxy","get","target","property","receiver","Reflect","path","caclPath","isPlainObject","Array","isArray","name","defineProperty","enumerable","writable","configurable","defineHiddenConstantProperty","count","isNaN","set"],"mappings":"oEA8CA,IAPiBA,EAAMC,EAOnBC,EAAYC,SAASC,UACrBC,EAAcC,OAAOF,UAGrBG,EAAeL,EAAUM,SAGzBC,EAAiBJ,EAAYI,eAG7BC,EAAmBH,EAAaI,KAAKL,QAOrCM,EAAiBP,EAAYG,SAG7BK,GA3Bab,EA2BUM,OAAOQ,eA3BXb,EA2B2BK,OA1BzC,SAASS,GACd,OAAOf,EAAKC,EAAUc,MAiG1B,MAdA,SAAuBC,GACrB,IAjCF,SAAsBA,GACpB,QAASA,GAAyB,iBAATA,EAgCpBC,CAAaD,IAnHJ,mBAoHVJ,EAAeD,KAAKK,IA3G1B,SAAsBA,GAGpB,IAAIE,GAAS,EACb,GAAa,MAATF,GAA0C,mBAAlBA,EAAMR,SAChC,IACEU,KAAYF,EAAQ,IACpB,MAAOG,IAEX,OAAOD,EAkGwCE,CAAaJ,GAC1D,OAAO,EAET,IAAIK,EAAQR,EAAaG,GACzB,GAAc,OAAVK,EACF,OAAO,EAET,IAAIC,EAAOb,EAAeE,KAAKU,EAAO,gBAAkBA,EAAME,YAC9D,MAAuB,mBAARD,GACbA,aAAgBA,GAAQf,EAAaI,KAAKW,IAASZ,GCrI1Cc,EAAeC,OAAO,sEAkCnBC,EACdC,EACAC,EACAC,GA4BA,OA1Bc,IAAIC,MAAMH,EAAO,CAC7BI,aAAIC,EAAQC,EAAUC,GACpB,IAAMlB,EAAQmB,QAAQJ,IAAIC,EAAQC,EAAUC,GAG5C,GAAwB,iBAAbD,EACT,OAAOjB,EAGT,IAAMoB,EA9CZ,SAAkBP,EAAYI,GAC5B,OAAOJ,EAAgBA,MAAcI,EAAa,GAAGA,EA6CpCI,CAASR,EAAYI,GAElC,GAAIK,EAActB,IAAUuB,MAAMC,QAAQxB,GAExC,OA/CR,SACEgB,EACAS,EACAzB,GAEAV,OAAOoC,eAAeV,EAAQS,EAAM,CAClCzB,MAAOA,EACP2B,YAAY,EACZC,UAAU,EACVC,cAAc,IAqCVC,CAA6B9B,EAAOQ,EAAc,GAC3CE,EAAYV,EAAOY,EAAMQ,GAGlC,IAAMW,EAAQnB,EAAKG,IAAIK,GAAQ,EAO/B,OANIY,MAAMD,GACRnB,EAAKqB,IAAIb,EAAM,GAEfR,EAAKqB,IAAIb,EAAMW,GAGV/B"}